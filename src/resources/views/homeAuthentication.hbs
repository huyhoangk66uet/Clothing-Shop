<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clothes Shop</title>
    <link rel="stylesheet" href="/css/home.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css" integrity="sha512-SzlrxWUlpfuzQ+pcUCosxcglQRNAq/DZjVsC0lE40xsADsfeQoEypE+enwcOiGjk/bSuGGKHEyjSoQ1zVisanQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>
    <header>
        <div class="header">
            <div class="logo" style="display: flex; align-items: center;">
                <a href="/homeAuthentication">
                        <img style="width: 80px;" src="/img/delivery_fast.jpg" alt="LOGO">
                </a>
                <div class="category-item" >
                    <div onclick="" class="category-item__home"><a href="/home">Cặc Shop</a></div>
                </div>
            </div>
            <div class="search">
                <input class="search__input" type="text" placeholder="Tìm kiếm sản phẩm">
                <button class="search__btn"><i class="fa-solid fa-magnifying-glass"></i></button>
            </div>
            <div class="other">
                <div class="other__authentication">
                    <div class="user-item">
                        <div class="user-item__parent" style="font-size: 15px; width: max-content; height:15px " >
                            <div style="display: flex;">
                                <li style="margin-right: 5px;"> <i class="fa-solid fa-user"></i></li>
                                <li id="info_user"></li>
                            </div>
                        </div>
                        <div class="user-item__child">
                            <li>Thông tin tài khoản</li>
                            <li>Đơn hàng của tôi</li>
                            <li onclick="logout()">Đăng xuất</li>
                        </div>
                    </div>
                </div>
                <div class="other__individual">
                    <li> 
                        <form action="/cart" method="get">
                            <button type="submit" class="cart_button">
                                <i class="fa-solid fa-cart-shopping"></i>
                            </button>
                        </form>
                    </li>
                </div>
            </div>
        </div>
        <div class="category">
            {{!-- <div class="category-item" >
                <div onclick="" class="category-item__home"><a href="/home">Trang chủ</a></div>
            </div> --}}
            <div class="category-item">
                <div class="category-item__parent" ><a href="">Nam</a></div>
                <div class="category-item__child">
                    <li>danh mục con 1</li>
                    <li>danh mục con 2</li>
                    <li>danh mục con 3</li>
                    <li>danh mục con 4</li>
                    <li>danh mục con 5</li>
                </div>
            </div>
            <div class="category-item">
                <div class="category-item__parent" ><a href="">Nữ</a></div>
                <div class="category-item__child">
                    <li>danh mục con 1</li>
                    <li>danh mục con 2</li>
                </div>
            </div>
            <div class="category-item">
                <div class="category-item__parent" ><a href="">Trẻ em</a></div>
                <div class="category-item__child">
                    <li>danh mục con 1</li>
                    <li>danh mục con 2</li>
                    <li onclick="logout()">danh mục con 3</li>
                </div>
            </div>
            <div class="category-item">
                <div class="category-item__parent" ><a href="">Khác</a></div>
                <div class="category-item__child">
                    <li>danh mục con 1</li>
                    <li>danh mục con 2</li>
                    <li>danh mục con 3</li>
                    <li>danh mục con 4</li>
                </div>
            </div>   
        </div>
        
        
    </header>
    <div  class="content">
        {{#each products}}
            <a href="/product/{{this._id}}" style="text-decoration: none;">
                <div class="product" onmouseover="slideShow({productId : '{{sum @index 1}}', imageClass : 'img{{sum @index 1}}'})" id="{{sum @index 1}}">
                <div class="product__image">
                    <img class="img{{sum @index 1}}" style="display: block;" src="{{this.main_image}}" alt="">
                    <img class="img{{sum @index 1}}" style="display: none;" src="{{getValueAtIndex image_ 0}}" alt="">
                    <img class="img{{sum @index 1}}" style="display: none;" src="{{getValueAtIndex image_ 1}}" alt="">
                    <img class="img{{sum @index 1}}" style="display: none;" src="{{getValueAtIndex image_ 2}}" alt="">
                </div>
                <div class="product__name">{{this.name}}</div>
                {{!-- <p class="card-text">{{this.description}}</p> --}}
                <div>
                    <p>Chi con: {{this.remaining_products}} san pham</p>
                </div>
                <div class="product__price">{{this.price}}</div>
            
                {{!-- <div class="product__cart"><i class="fa-solid fa-cart-shopping"></i></div> --}}
                </div>   
            </a>   
        {{/each}}   
    </div>
    

    <form action="/homePage/logout" method="get" id="logout"></form>

</body>
<footer>

</footer>

<script>
    
    $('#info_user').text(window.localStorage.getItem('name'))

    function logout() {
        document.getElementById('logout').submit()
    }
    
     
</script>
<script>
        function slideShow({
            productId = '',
            imageClass = ''
        }){
            var isLoop = true;
            const product = document.getElementById(productId);
            product.addEventListener('mouseenter', () => {
                var myIndex = 0;
                function carousel() {
                var i;
                var x = document.getElementsByClassName(imageClass);
                for (i = 0; i < x.length; i++) {
                    x[i].style.display = "none";  
                }
                myIndex++;
                if (myIndex > x.length) {myIndex = 1}    
                x[myIndex-1].style.display = "block";  
                setTimeout(startSlideShow, 1500);    
                }

                function startSlideShow(){
                    if(isLoop){
                        carousel();
                    }
                }
                startSlideShow()
            });
            product.addEventListener('mouseleave', () => {
                isLoop = false;
                isMouseStop = false
                isMouseStart = true
                var x = document.getElementsByClassName(imageClass);
                x[0].style.display = "block";
                for (i = 1; i < x.length; i++) {
                    x[i].style.display = "none";
                }
            });
        }
    </script>
</html>
{{!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-aFq/bzH65dt+w6FI2ooMVUpc+21e0SRygnTpmBvdBgSdnuTN7QbdgL+OapgHtvPp" crossorigin="anonymous">

</head>
<body>
    <div id="info_user"></div>

    <form action="/cart" method="get">
        <button type="submit">CART</button>
    </form>
    <form action="/homePage/logout" method="get">
        <button type="submit">LOG OUT</button>
    </form>

    <div>
        
        <div class="row">
            {{#each products}}
            <div class="col-sm-6 col-lg-3" style="margin-right: 0px;">
                <div class="card mt-4" style="width: 18rem;">
                    <a href="/product/{{this._id}}">
                        <img src="{{this.main_image}}" class="card-img-top" alt="...">
                    </a>
                    <div class="card-body">
                        <p>{{this.name}}</p>
                        <p>{{this.price}} d</p>
                        <p class="card-text">{{this.description}}</p>
                        <p>Chi con: {{this.remaining_products}} san pham</p>
                    </div>
                </div>
            </div>
            {{/each}}
        </div>
        
    </div>
    
</body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js" integrity="sha384-qKXV1j0HvMUeCBQ+QVp7JcfGl760yU08IQ+GpUo5hlbpg51QRiuqHAJz8+BrxE/N" crossorigin="anonymous"></script>

<script>
    
    $('#info_user').text(window.localStorage.getItem('name'))
     
</script>
</html> --}}