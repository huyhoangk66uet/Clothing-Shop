<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/css/profile.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/css/header.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css"
    integrity="sha512-SzlrxWUlpfuzQ+pcUCosxcglQRNAq/DZjVsC0lE40xsADsfeQoEypE+enwcOiGjk/bSuGGKHEyjSoQ1zVisanQ=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-aFq/bzH65dt+w6FI2ooMVUpc+21e0SRygnTpmBvdBgSdnuTN7QbdgL+OapgHtvPp" crossorigin="anonymous">
</head>

<body>
    <div class="main">
        <!-- Container -->
        {{> header}}
        <div class="container">
            <div class="directory">
                <div class="avatar">
                    <a href="/profile" class="avatar-place">
                        <div class="image-place">
                            <img src="https://wiki.tino.org/wp-content/uploads/2021/07/word-image-1467.png"
                                alt="Your avatar" class="avatar-image">
                        </div>
                    </a>

                    <div class="username">
                        <div class="avatar-name">Địt mẹ mày</div>
                        <a class="change-profile" onclick="loadBody('info')">
                            <div class="change-button">
                                <i class="fa fa-pencil pencil-icon"></i>
                                Sửa hồ sơ
                            </div>
                        </a>
                    </div>
                </div>
                <div class="list-directory">
                    <div class="directory-header">
                        <a class="dict-button dict-header" onclick="loadBody('info')">
                            <i class="fa fa-user-o user-icon"></i>
                            Tài khoản của tôi
                        </a>
                        <div class="sub-directory">
                            <ul>
                                <li><a class="dict-button" onclick="loadBody('info')">Hồ sơ</a></li>
                                <li><a class="dict-button" onclick="loadBody('password')" href="/password">Đổi mật khẩu</a></li>
                            </ul>
                        </div>
                    </div>

                    <div class="directory-header">
                        <a href="" class="dict-button dict-header">
                            <i class="fa fa-shopping-cart user-icon"></i>
                            Giỏ hàng
                        </a>
                    </div>

                    <div class="directory-header">
                        <a href="" class="dict-button dict-header">
                            <i class="material-icons user-icon">receipt</i>
                            Lịch sử giao dịch
                        </a>
                    </div>
                </div>
            </div>
            <div class="detail" id="dynamic-content">

                <div>
                    <div id="profile" class="padding-detail">
                        <div class="detail-header">
                            <h1 class="detail-header-content">Hồ sơ của tôi</h1>
                        </div>
                        <div class="container-content">
                            <form action="" class="container-form">
                                <div class="detail-content">
                                    <table class="table-content">
                                        <tr>
                                            <td class="first-column username-content">
                                                <label for="">Tên đăng nhập</label>
                                            </td>
                                            <td class="second-column">
                                                <div class="table-input__outer">
                                                    <input type="text" class="table-input__inner" value="Địt mẹ mày"
                                                        readonly>
                                                </div>
                                                <div class="table-input__content">
                                                    Tên Đăng nhập không thể thay đổi
                                                </div>

                                            </td>
                                        </tr>

                                        <tr>
                                            <td class="first-column">
                                                <label for="">Tên</label>
                                            </td>
                                            <td class="second-column">
                                                <div class="table-input__outer">
                                                    <input type="text" placeholder class="table-input__inner" value="">
                                                </div>
                                            </td>
                                        </tr>

                                        <tr>
                                            <td class="first-column">
                                                <label for="">Email</label>
                                            </td>
                                            <td class="second-column">
                                                <div class="col-container">
                                                    <div class="col-content">hahaha@gmail.com</div>
                                                    <a class="col-btn email" onclick="loadBody('email')">Thay đổi</a>
                                                </div>
                                            </td>
                                        </tr>

                                        <tr>
                                            <td class="first-column">
                                                <label for="">Số điện thoại</label>
                                            </td>
                                            <td class="second-column">
                                                <div class="col-container">
                                                    <div class="col-content">022649885</div>
                                                    <a class="col-btn phone" onclick="loadBody('phone')">Thay đổi</a>
                                                </div>
                                            </td>
                                        </tr>

                                        <tr>
                                            <td class="first-column">
                                                <label for="">Giới tính</label>
                                            </td>
                                            <td class="second-column">
                                                <div class="radio-group" role="radiogroup">
                                                    <div class="radio" tabindex="0" role="radio" aria-checked="false"
                                                        id="male">
                                                        <div class="radio-btn">
                                                            <div class="radio-btn__outer-circle">
                                                                <div class="radio-btn__inner-circle"></div>
                                                            </div>
                                                        </div>

                                                        <div class="radio__content">
                                                            <div class="radio__label">
                                                                Nam
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="radio" tabindex="0" role="radio" aria-checked="false"
                                                        id="female">
                                                        <div class="radio-btn">
                                                            <div class="radio-btn__outer-circle">
                                                                <div class="radio-btn__inner-circle"></div>
                                                            </div>
                                                        </div>

                                                        <div class="radio__content">
                                                            <div class="radio__label">
                                                                Nữ
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="radio" tabindex="0" role="radio" aria-checked="true"
                                                        id="other">
                                                        <div class="radio-btn">
                                                            <div class="radio-btn__outer-circle">
                                                                <div class="radio-btn__inner-circle"></div>
                                                            </div>
                                                        </div>

                                                        <div class="radio__content">
                                                            <div class="radio__label">
                                                                Bê đê
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>

                                        <tr>
                                            <td class="first-column">
                                                <label for="birthday">Ngày sinh</label>
                                            </td>
                                            <td class="second-column">
                                                <input type="date" id="birthday" name="birthday">
                                            </td>
                                        </tr>

                                        <tr>
                                            <td class="first-column">

                                            </td>
                                            <td class="second-column">
                                                <button type="button" class="submit-button" aria-disabled="false"
                                                    id="save-button">Lưu</button>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </form>

                            <div class="change-image-container">
                                <div class="change-image">
                                    <div class="image-container">
                                        <div class="image"
                                            style="background-image: url(https://wiki.tino.org/wp-content/uploads/2021/07/word-image-1467.png);">
                                        </div>
                                    </div>

                                    <label for="file-upload" class="choose-image-button dict-button">
                                        Chọn ảnh
                                    </label>
                                    <input type="file" class="choose-image" id="file-upload" accept=".jpg, .jpeg, .png">

                                    <div class="change-content-container">
                                        <div class="change-content">Dung lượng file tối đa 1MB</div>
                                        <div class="change-content">Định dạng: .JPEG, .PNG</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>



            </div>
        </div>
    </div>

    <div class="popup js-popup">
        <div class="popup-container js-popup-container">
            <div class="image-place">
                <img src="https://png.pngtree.com/png-vector/20190228/ourmid/pngtree-check-mark-icon-design-template-vector-isolated-png-image_711433.jpg"
                    alt="" class="success-checker">
            </div>
            <div class="popup-content">
                Cập nhật thành công
            </div>
        </div>
    </div>


    <!-- Load body -->
    <script>
        function removeChild() {
            const dynamicContent = document.querySelector('#dynamic-content');

            while (dynamicContent.children.length > 1) {
                dynamicContent.removeChild(dynamicContent.firstChild);
            }
        }
        function loadBody(name) {
            alert("ok")
            const dynamicContent = document.querySelector('#dynamic-content');
            // Lấy dữ liệu từ server
            const __dirpath = 'http://192.168.1.30:8080'
            const path = __dirpath + '/src/resources/views/profileElements/' + name + '.hbs'
            fetch(path)
                .then(response => response.text())
                .then(data => {

                    // Thêm phần khác vào div
                    const newElement = document.createElement('div');
                    newElement.innerHTML = data;
                    dynamicContent.appendChild(newElement)
                    removeChild();
                    // Thay đổi URL trên thanh địa chỉ
                    addEventsToNewElements();
                    history.pushState({}, '', '/profile/' + name);
                });
        }  
    </script>

    <!-- Show/Hide popup -->

    <script>

        // const popupClose = document.querySelector('.js-popup-close')

        function showBuyTickets(buyBtn, popup) {
            return function () {
                if (buyBtn.getAttribute('aria-disabled') == 'false') {
                    popup.classList.add('open');
                    buyBtn.setAttribute('aria-disable', 'true');
                }
            }
        }

        function hideBuyTickets(popup) {
            return function () {
                if (popup.classList.contains('open')) {
                    popup.classList.remove('open');
                    buyBtn.setAttribute('aria-disable', 'false');
                }
            }
        }

        function addEventsToNewElements() {
            const submitBtns = document.querySelectorAll('.submit-button');
            const popup = document.querySelector('.js-popup');
            const popupContainer = document.querySelector('.js-popup-container');

            for (const buyBtn of submitBtns) {
                buyBtn.addEventListener('click', showBuyTickets(buyBtn, popup));
            }

            popup.addEventListener('click', hideBuyTickets(popup));
            popupContainer.addEventListener('click', function (event) {
                event.stopPropagation();
            });
        }
        addEventsToNewElements();
    </script>

    <!-- Choose gender -->

    <script>

        function setAllAriaCheck(btns) {
            for (const btn of btns) {
                btn.setAttribute('aria-checked', 'false')
            }
        }
        function setAriaCheck(radio, radioList) {
            // console.log("ok")
            setAllAriaCheck(radioList)
            radio.setAttribute('aria-checked', 'true')
        }
        document.addEventListener('click', function (event) {
            const target = event.target;
            const radio = target.closest('.radio')
            if (radio != null) {
                const radioBtns = document.querySelectorAll(".radio");
                setAriaCheck(radio, radioBtns)
            }
        })
    </script>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-qKXV1j0HvMUeCBQ+QVp7JcfGl760yU08IQ+GpUo5hlbpg51QRiuqHAJz8+BrxE/N"
        crossorigin="anonymous"></script>

</body>

</html>